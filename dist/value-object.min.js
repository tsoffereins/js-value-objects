!function(t){var e=t.ValueObject=function(t){if(r(this,"value",this.parse(t)),r(this,"original",t),!this.validate(this.value))throw this.throwException(),new o(this)};e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.parse=function(t){return t},e.prototype.throwException=function(){},e.library=Object.create(null),e.define=function(t,o){if(t=t.charAt(0).toUpperCase()+t.slice(1),"function"==typeof o){var r=o;o={validate:r}}if("object"!=typeof o||"function"!=typeof o.validate)throw new Error("ValueObject ["+t+"] can not be created without a validate method.");var a=function(t){e.call(this,t)};a.prototype=Object.create(e.prototype);for(var i in o)a.prototype[i]=o[i];o.extend&&n(a,o.extend),a.prototype.name=t;var c=function(t){return arguments.length>1&&(t=Array.prototype.slice.call(arguments,0)),p(a,t)};return c.prototype=a.prototype,c.validate=a.prototype.validate,e.library[t]=c,c};var o=e.InvalidValueException=function(t){"object"==typeof t?this.message="["+t.original+"] is not a valid value for "+t.name+".":this.message=t,this.type=t.name};o.prototype=Error.prototype;var r=function(t,e,o){Object.defineProperty(t,e,{value:o,writable:!1,enumerable:!1})},n=function(t,e){var o=e.prototype,r=Object.getOwnPropertyNames(o);for(var n in r){var i=r[n];o[i]instanceof Function&&(t.prototype[i]||a(t.prototype,i,o[i]))}},a=function(t,e,o){r(t,e,function(){return o.apply(this.value,arguments)})},i=Object.create(null),p=function(t,e){var o=i[t.name];o||(o=i[t.name]=Object.create(null));var r=JSON.stringify(e);return o[r]?o[r]:(o[r]=new t(e),o[r])};module.exports=e}(this);